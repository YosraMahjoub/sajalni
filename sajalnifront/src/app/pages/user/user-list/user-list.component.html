<aside class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-3 " id="sidenav-main">
  <app-sidebar></app-sidebar>
</aside>
<main class="main-content position-relative max-height-vh-100 h-100 mt-1 border-radius-lg ">
  <app-navbar></app-navbar>



<div class="container-fluid py-4"> 
  
</div>
<div class="container-fluid py-4">
  <div class="container-fluid py-4"style="float: right;" > 
    <div style="float: right; margin-right: 2ch;" >
      <div class="d-flex justify-content-center h-100">
        <div class="searchbar">
          <input class="search_input" [(ngModel)]="searchValue" type="text"  placeholder="Rechercher...">
          <a href="#" class="search_icon"><i class="fas fa-search"></i></a>
        </div>
      </div>
   </div>
  </div>
  <button class="btn active btn-secondary d-inline-flex align-items-center me-2 " (click) = "addUser()"  aria-haspopup="true" aria-expanded="false">
    <i class="fas fa-plus"></i>&nbsp;
    New
</button>
  <div class="row">
    <div class="col-12">
      <div class="card mb-4 blur shadow-blur mx-4  overflow-hidden" style="border-radius: 1rem; ">
        
        <div class="card-body px-0 pt-0 pb-2" >
          <div class="table-responsive p-0">
            <table class="table align-items-center mb-0 table-hover" > 
              <thead>
                <tr>
                  <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Nom</th>
                  <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Email</th>
                  <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Role</th>
                  <th class="text-uppercase text-secondary text-xxs font-weight-bolder text-center opacity-7 ps-2">date</th>
                  <th></th>
                </tr>              
              </thead>
              <tbody>
               
                <tr *ngFor="let user of users | filter:searchValue">
                  <td>
                    <div class="d-flex px-2">
                      <div>
                        <div *ngIf="user.roles[0].name.includes('CLIENT'); else elseif1">
                        <img src="/assets/white/img/client.png" class="avatar avatar-sm me-3" alt="user3">
                      </div>
                      <ng-template #elseif1 >
                        <div *ngIf="user.roles[0].name.includes('ADMIN'); else elseif2">
                          <img src="/assets/white/img/bruce-mars.png" class="avatar avatar-sm me-3" alt="user3">
                        </div>
                      </ng-template>
                      <ng-template #elseif2>
                          <img src="/assets/white/img/test.png" class="avatar avatar-sm me-3" alt="user3">
                      </ng-template>
                      </div>
                      <div class="my-auto">
                        <h6 class="text-xs font-weight-bold">{{user.nom}}</h6>
                      </div>
                    </div>
                  </td>
                  <td>
                    <p class=" mb-0 text-sm">{{user.email}}</p>
                  </td>
                  <td >
                    <div *ngFor="let role of user.roles">
                      <span  class="mb-0 text-lowercase text-sm"> {{role.name}}</span>
                       <!-- <span  class="mb-0 text-lowercase text-sm"> {{user.roles[0].name}}</span> -->
                      </div>
                    </td>
                  <td class="align-middle text-center">
                    <span class="text-secondary text-xs font-weight-bold">{{user.date | date:'dd/MM/yyyy'}}</span>
                  </td>
                  <td class="align-middle ">
                    <a routerLink ='/user' (click) = "deleteUser(user.id)"  class="text-secondary  font-weight-bold text-xs" data-toggle="tooltip" data-original-title="Edit user" >
                      <i class="far fa-trash-alt me-2"  aria-hidden="true" ></i>
                       Delete  </a>
                      <a>&nbsp;      </a>
                     <a routerLink ='user/update/:id' (click) = "updateUser(user.id)"  class="text-secondary  font-weight-bold text-xs" data-toggle="tooltip" data-original-title="Edit user">
                       <i class="fas fa-pencil-alt  me-2  "aria-hidden="true"></i>
                      
                     Edit
                     </a>
   
                  </td>
                </tr>
               
               
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    
  </div>
</div>




</main>
